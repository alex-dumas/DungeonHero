{"ts":1373409912079,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*\nThis entity passes through all calls to triggeredBy() to its own targets\nafter a delay of n seconds.\n\nE.g.: Set an EntityDelay as the target of an EntityTrigger and connect the\nentities that should be triggered after the delay as targets to the \nEntityDelay.\n\n\nKeys for Weltmeister:\n\ndelay \n\tDelay in seconds after which the targets should be triggered.\n\tdefault: 1\n\t\ntarget.1, target.2 ... target.n\n\tNames of the entities whose triggeredBy() method will be called after \n\tthe delay.\n*/\n\nig.module(\n\t'game.entities.delay'\n)\n.requires(\n\t'impact.entity'\n)\n.defines(function(){\n\nEntityDelay = ig.Entity.extend({\n\t_wmDrawBox: true,\n\t_wmBoxColor: 'rgba(255, 100, 0, 0.7)',\n\t\n\tsize: {x: 8, y: 8},\n\tdelay: 1,\n\tdelayTimer: null,\n\ttriggerEntity: null,\n\t\n\t\n\tinit: function( x, y, settings ) {\n\t\tthis.parent( x, y, settings );\n\t\tthis.delayTimer = new ig.Timer();\n\t},\n\t\n\t\n\ttriggeredBy: function( entity, trigger ) {\t\t\n\t\tthis.fire = true;\n\t\tthis.delayTimer.set( this.delay );\n\t\tthis.triggerEntity = entity;\n\t},\n\t\n\t\n\tupdate: function(){\n\t\tif( this.fire && this.delayTimer.delta() > 0 ) {\n\t\t\tthis.fire = false;\n\n\t\t\tfor( var t in this.target ) {\n\t\t\t\tvar ent = ig.game.getEntityByName( this.target[t] );\n\t\t\t\tif( ent && typeof(ent.triggeredBy) == 'function' ) {\n\t\t\t\t\tent.triggeredBy( this.triggerEntity, this );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n});"]],"start1":0,"start2":0,"length1":0,"length2":1323}]],"length":1323}
